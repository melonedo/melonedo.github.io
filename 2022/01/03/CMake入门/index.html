<!DOCTYPE HTML>
<html lang="zh">
<head>
  <meta charset="utf-8">
  
  <title>CMake入门 | melonedo&#39;s blog</title>
  <meta name="author" content="melonedo">
  
  <meta name="description" content="CMake是一个C语言的项目管理器，用于简便地指明一个C项目生成应用/库的方法，并生成编译脚本（如Makefile）或IDE项目文件（vs解决方案sln），用于最终编译C文件。相比于其他的的项目管理器，CMake的特点是：

懂C。相比于通用的make，CMake的项目组织方法和C的特性息息相关，并">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="CMake入门"/>
  <meta property="og:site_name" content="melonedo&#39;s blog"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="melonedo&#39;s blog" type="application/atom+xml">
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 5.0.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">melonedo&#39;s blog</a></h1>
  <h2><a href="/">倘若星河昭见，能否有我在列</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-CMake入门" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2022-01-03T03:46:34.000Z"><a href="/2022/01/03/CMake入门/">2022-01-03</a></time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">CMake入门</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p><strong>CMake</strong>是一个C语言的项目管理器，用于简便地指明一个C项目生成应用/库的方法，并生成编译脚本（如Makefile）或IDE项目文件（vs解决方案sln），用于最终编译C文件。<br>相比于其他的的项目管理器，CMake的特点是：</p>
<ul>
<li>懂C。相比于通用的make，CMake的项目组织方法和C的特性息息相关，并且内置了众多常见的编译选项，可以避免记忆常见的命令参数。</li>
<li>通用。一方面大量项目使用CMake管理，CMake众多C工具中的最大公约数，可以用于生成VS的项目，也可以支持VSCode，也可以在*nix环境中适应gcc或clang。</li>
</ul>
<h1 id="C项目"><a href="#C项目" class="headerlink" title="C项目"></a>C项目</h1><p>要理解CMake，首先要知道C项目指的是什么。C项目包括源代码（源文件<code>.c</code>/<code>.cpp</code>和头文件<code>.h</code>）以及对应的编译选项，生成若干个目标（target）。对象指的是可直接执行的应用，或可以被用于构建新目标的库。</p>
<ul>
<li>头文件</li>
<li>源文件</li>
<li>目标（二进制文件）</li>
<li>编译选项</li>
</ul>
<p>应用依赖只有环境和动态库，但库还包括了依赖的库、头文件、编译选项</p>
<h1 id="两个抽象层：命令vs函数"><a href="#两个抽象层：命令vs函数" class="headerlink" title="两个抽象层：命令vs函数"></a>两个抽象层：命令vs函数</h1><h2 id="命令和变量"><a href="#命令和变量" class="headerlink" title="命令和变量"></a>命令和变量</h2><p>由于语言的特点，C项目不只包括代码，还需要包括能够编译代码的编译命令，这些命令不只用于找到对应的代码，还需要调整一些功能的开关，如RTTI。</p>
<p>add_custom_target 示例</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>CMAKE_CXX_FLAGS</p>
<p>使得多个命令共享参数，但由于是全局的，可能导致冲突</p>
<p>/utf-8</p>
<h3 id="generator-expression"><a href="#generator-expression" class="headerlink" title="generator expression"></a>generator expression</h3><h2 id="函数和属性"><a href="#函数和属性" class="headerlink" title="函数和属性"></a>函数和属性</h2><p>target_compile_options</p>
<p>可以灵活地设定全局或者只针对若干目标指定，可以避免副作用互相影响。</p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>set_property get_property</p>
<h3 id="宏"><a href="#宏" class="headerlink" title="宏"></a>宏</h3><h1 id="编译模型"><a href="#编译模型" class="headerlink" title="编译模型"></a>编译模型</h1><h2 id="自己的库"><a href="#自己的库" class="headerlink" title="自己的库"></a>自己的库</h2><p>只介绍最现代的“面向目标”的方法，add_include_directories、include_directories等不介绍。</p>
<h3 id="add-executable-add-library"><a href="#add-executable-add-library" class="headerlink" title="add_executable/add_library"></a>add_executable/add_library</h3><p>生成目标<br>“构造函数”</p>
<h4 id="静态-动态库"><a href="#静态-动态库" class="headerlink" title="静态/动态库"></a>静态/动态库</h4><p>不需要指定具体命令<br>INTERAFACE见下</p>
<h3 id="target-include-directories"><a href="#target-include-directories" class="headerlink" title="target_include_directories"></a>target_include_directories</h3><p>指定头文件（目录）<br>具体需要什么头文件在c代码中include</p>
<h3 id="target-link-libraries"><a href="#target-link-libraries" class="headerlink" title="target_link_libraries"></a>target_link_libraries</h3><p>指定库，包括库的组成部分头文件、二进制文件、编译选项</p>
<h3 id="target-compile-options"><a href="#target-compile-options" class="headerlink" title="target_compile_options"></a>target_compile_options</h3><p>指定编译选项</p>
<h3 id="INTERFACE-PRIVATE-PUBLIC"><a href="#INTERFACE-PRIVATE-PUBLIC" class="headerlink" title="INTERFACE/PRIVATE/PUBLIC"></a>INTERFACE/PRIVATE/PUBLIC</h3><p>他有、私有、他有及私有</p>
<h4 id="INTERFACE库"><a href="#INTERFACE库" class="headerlink" title="INTERFACE库"></a>INTERFACE库</h4><p>不生成文件，用于指定头文件目录和编译选项。添加的文件仅用于在ide中展示</p>
<h2 id="别人的库"><a href="#别人的库" class="headerlink" title="别人的库"></a>别人的库</h2><h3 id="find-package"><a href="#find-package" class="headerlink" title="find_package"></a>find_package</h3><p>获得上述目标</p>
<h3 id="FetchContent"><a href="#FetchContent" class="headerlink" title="FetchContent"></a>FetchContent</h3><p>可以下东西，但是目前还没解决</p>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/编程/">编程</a>, <a href="/tags/CMake/">CMake</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="https://melonedo.github.io/2022/01/03/CMake%E5%85%A5%E9%97%A8/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="as_sitesearch" value="melonedo.github.io">
  </form>
</div>


  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/CMake/">CMake</a><small>3</small></li>
  
    <li><a href="/tags/julia/">julia</a><small>2</small></li>
  
    <li><a href="/tags/编程/">编程</a><small>7</small></li>
  
    <li><a href="/tags/读书笔记/">读书笔记</a><small>4</small></li>
  
    <li><a href="/tags/随想/">随想</a><small>2</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2022 melonedo
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>
